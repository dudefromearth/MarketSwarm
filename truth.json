{
  "version": "1.2",
  "description": "Truth: Shared access/API for ingest (RSS Agg/Massive to Market Redis), Vexy augmentation.",
  "components": {
    "rss_agg": {
      "meta": {
        "name": "Feed Aggregator",
        "description": "Ingests RSS to self-describing Market Redis (rss:queue for Vexy/SSE)"
      },
      "access_points": {
        "publish_to": [
          { "bus": "system-redis", "key": "vexy:messages" },
          { "bus": "system-redis", "key": "rss_agg:heartbeat" }
        ],
        "queue_key": "rss:queue",
        "index_key": "rss:index",
        "item_template": "rss:item:{uid}",
        "format_key": "rss:format"
      },
      "generate_rss": {
        "schedule": {
          "interval_sec": 600,
          "description": "Run every 10 minutes"
        }
      },
      "filters": {
        "required_fields": ["title", "abstract", "url"],
        "on_failure": "rss:quarantine"
      },
      "dependencies": [],
      "internal_config": "feeds.json"
    },
    "massive": {
      "meta": {
        "name": "Market Data Ingestor",
        "description": "Ingests Massive to self-describing Market Redis (market:tick for Vexy/SSE)"
      },
      "access_points": {
       "publish_to": [
         { "bus": "market-redis", "key": "sse:chain-feed" },
         { "bus": "system-redis", "key": "massive:spot" },
         { "bus": "system-redis", "key": "massive:heartbeat" }
        ],
        "services_key": "massive:services"
      },
      "dependencies": [],
      "api_key": "[POLYGON_API_KEY]"
    },
    "vexy_ai": {
      "meta": {
        "name": "Vexy AI Base Service",
        "description": "Subscribes to RSS/Market, augments, publishes derived to Market Redis"
      },
      "access_points": {
        "subscribe_to": [
          { "bus": "system-redis", "key": "rss:queue" },
          { "bus": "system-redis", "key": "massive:spot" }
        ],
        "publish_to": [
          { "bus": "market-redis", "key": "sse:vexy-message" },
          { "bus": "system-redis", "key": "vexy_ai:heartbeat" }
        ]
      },
      "dependencies": ["rss_agg", "massive"],
      "workflow": "augment_bias_gamma"
    },
    "mesh": {
      "meta": {
        "name": "Mesh Coordinator",
        "description": "Registers and monitors all active services via heartbeat."
      },
      "access_points": {
        "publish_to": [
          { "bus": "system-redis", "key": "mesh:gossip" },
          { "bus": "system-redis", "key": "mesh:heartbeat" }
        ],
        "services_key": "mesh:services"
      },
      "dependencies": []
    },
    "healer": {
      "meta": {
        "name": "Service Healer",
        "description": "Monitors the heartbeats of all services, and resuscitates services when necessary"
      },
      "access_points": {
        "subscribe_to": [
          { "bus": "system-redis", "key": "rss_agg:heartbeat" },
          { "bus": "system-redis", "key": "massive:heartbeat" },
          { "bus": "system-redis", "key": "vexy_ai:heartbeat" },
          { "bus": "system-redis", "key": "mesh:heartbeat" }
        ],
        "publish_to": [
          { "bus": "system-redis", "key": "healer:alerts" },
          { "bus": "system-redis", "key": "healer:heartbeat" }
        ],
        "services_key": "healer:services"
      },
      "threshold": { "heartbeat_cadence": 30 },
      "heartbeat": {
        "channel": "healer:heartbeat",
        "interval_sec": 10,
        "redis_url": "redis://system-redis:6379"
      },
      "dependencies": []
    }
  }
}